@inherits LayoutComponentBase
@rendermode InteractiveServer
@inject IUserContextService UserContext

@* Required for MudBlazor*@
<MudThemeProvider Theme="@WishListTheme" />
<MudPopoverProvider />
<MudSnackbarProvider />
<MudDialogProvider Position="DialogPosition.Center"
                   MaxWidth="MaxWidth.False"
                   CloseOnEscapeKey="false"
                   CloseButton="true"
                   BackdropClick="false" />

<MudLayout Class="MainLayout">
    <AppBar />
    <MudContainer MaxWidth="MaxWidth.False" Style="background-color: #1F5E3A;" Class="w-100 h-100 mr-0 ml-0 pr-0 pl-0">
        <MudMainContent Class="w-100 h-100" Style="flex: 1; display: flex; flex-direction: column;">
            @Body
        </MudMainContent>
    </MudContainer>
</MudLayout>

<style>
    .MainLayout {
        display: flex;
        flex-direction: column;
        min-height: 100vh; /* allow the page to grow beyond viewport if content is taller */
    }

        .MainLayout .mud-container {
            display: flex;
            flex-direction: column;
            flex: 1 1 auto; /* allow it to grow and fill space */
            overflow: visible; /* allow scroll if content exceeds container */
        }

        .MainLayout .mud-main-content {
            display: flex;
            flex-direction: column;
            flex: 1 1 auto;
            overflow: visible; /* or overflow-y: auto if you want scrollbars */
        }


</style>

@code {
    // string userName = string.Empty;
    // protected override async Task OnInitializedAsync()
    // {
    //     await Task.Delay(300);
    //     userName = await Task.FromResult(UserContext.UserName ?? userName);
    // }

    MudTheme WishListTheme = new MudTheme()
        {
            PaletteLight = new PaletteLight()  // You can also use PaletteDark for dark mode
            {
                Primary = "#2E8B57", // SeaGreen
            },
            Typography = new Typography()
            {
                Default = new DefaultTypography()
                {
                    FontFamily = new[] { "Open Sans", "Helvetica", "Arial", "sans-serif" },
                    FontSize = "1.25rem",
                    FontWeight = "500",
                    LineHeight = "1.6",
                    LetterSpacing = ".0075em"
                }
            }
        };

    // protected override async Task OnInitializedAsync()
    // {
    //     // Only initialize if not already done
    //     if (!UserContext.IsAuthenticated)
    //     {
    //         await UserContext.InitializeAsync();
    //     }
    // }
}